"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8777],{61424:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>s,metadata:()=>l,toc:()=>r});var i=t(74848),o=t(28453);const s={title:"Creating Node Extensions"},d=void 0,l={id:"creating-node-extensions",title:"Creating Node Extensions",description:"This document outlines how to create node extensions for Phoenix Code.",source:"@site/api/04-creating-node-extensions.md",sourceDirName:".",slug:"/creating-node-extensions",permalink:"/api/creating-node-extensions",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"Creating Node Extensions"},sidebar:"tutorialSidebar",previous:{title:"Creating Extensions",permalink:"/api/creating-extensions"},next:{title:"Publishing Themes & Extensions",permalink:"/api/publishing-extensions"}},a={},r=[{value:"How to create a new Node Extension",id:"how-to-create-a-new-node-extension",level:2},{value:"Setting up node extensions",id:"setting-up-node-extensions",level:2},{value:"nodeConfig Object",id:"nodeconfig-object",level:2},{value:"nodeIsRequired Field",id:"nodeisrequired-field",level:3},{value:"main Field",id:"main-field",level:3},{value:"npmInstall Field (Optional)",id:"npminstall-field-optional",level:3},{value:"Communicating between node.js and Phoenix Code",id:"communicating-between-nodejs-and-phoenix-code",level:2},{value:"Using this template",id:"using-this-template",level:2}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["This document outlines how to create node extensions for ",(0,i.jsx)(n.strong,{children:"Phoenix Code"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"how-to-create-a-new-node-extension",children:"How to create a new Node Extension"}),"\n",(0,i.jsxs)(n.p,{children:["To create a new node extension for Phoenix Code, use ",(0,i.jsx)(n.a,{href:"https://github.com/phcode-dev/extension-node-template",children:"this template"}),". This template extension works in the browser as well as desktop builds. In browser, it will not use node, and node.js based functionalities are not available. Desktop builds can use node capabilities."]}),"\n",(0,i.jsx)(n.p,{children:"In desktop builds, there is an additional capability to execute node.js code. This is helpful if you want to extend the functionality of Phoenix Code using the vast npm library."}),"\n",(0,i.jsxs)(n.p,{children:["For creating extensions that do not need node, use: ",(0,i.jsx)(n.a,{href:"https://github.com/phcode-dev/extension-template",children:"https://github.com/phcode-dev/extension-template"})]}),"\n",(0,i.jsx)(n.h2,{id:"setting-up-node-extensions",children:"Setting up node extensions"}),"\n",(0,i.jsx)(n.p,{children:"In package.json, add the following section"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n    "nodeConfig": {\n        "nodeIsRequired": false,\n        "main": "node/index.js",\n        "npmInstall": "node/"\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"nodeconfig-object",children:"nodeConfig Object"}),"\n",(0,i.jsx)(n.p,{children:"The nodeConfig object indicates that this is a Node extension."}),"\n",(0,i.jsx)(n.h3,{id:"nodeisrequired-field",children:"nodeIsRequired Field"}),"\n",(0,i.jsxs)(n.p,{children:["Set this field to ",(0,i.jsx)(n.code,{children:"true"})," if the extension relies on Node and won't function without it.\nIf set to ",(0,i.jsx)(n.code,{children:"false"})," or omitted, the extension can still be loaded in browser versions of Phoenix code without Node support, but it will use Node in native builds.\nIt will be shown in the extension manager dialog in browser builds as well."]}),"\n",(0,i.jsx)(n.h3,{id:"main-field",children:"main Field"}),"\n",(0,i.jsx)(n.p,{children:'Specifies the main entry point for the Node.js component of the extension.\nShould point to the main JavaScript file for the Node part of the extension.\nExample: "main": "node/index.js"'}),"\n",(0,i.jsx)(n.h3,{id:"npminstall-field-optional",children:"npmInstall Field (Optional)"}),"\n",(0,i.jsx)(n.p,{children:'Specifies the path to run npm install when the user installs the extension from the extension manager.\nIt\'s advisable not to package node_modules inside the extension. Only the package lock file should be distributed.\nExample: "npmInstall": "node/"'}),"\n",(0,i.jsx)(n.h2,{id:"communicating-between-nodejs-and-phoenix-code",children:"Communicating between node.js and Phoenix Code"}),"\n",(0,i.jsxs)(n.p,{children:["Use the ",(0,i.jsx)(n.a,{href:"https://docs.phcode.dev/api/API-Reference/NodeConnector",children:"NodeConnector-API"})," to call functions and send events between your node.js and Phoenix Code extension components."]}),"\n",(0,i.jsx)(n.p,{children:"This is available as a global object global.createNodeConnector."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://docs.phcode.dev/api/API-Reference/utils/EventDispatcher",children:"EventDispatcher-API"})," is also available in the global context as global.EventDispatcher for event trigger/listen within node."]}),"\n",(0,i.jsx)(n.h2,{id:"using-this-template",children:"Using this template"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://github.com/phcode-dev/extension-node-template/blob/main/README.md#using-this-template",children:"Click Here"})," for the instructions on how to use this template."]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>d,x:()=>l});var i=t(96540);const o={},s=i.createContext(o);function d(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:d(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);