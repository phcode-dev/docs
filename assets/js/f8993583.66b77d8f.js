"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7860],{24503:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>l,default:()=>a,frontMatter:()=>t,metadata:()=>d,toc:()=>h});var i=n(74848),r=n(28453);const t={},l=void 0,d={id:"API-Reference/search/FindInFiles",title:"FindInFiles",description:"Import :",source:"@site/api/API-Reference/search/FindInFiles.md",sourceDirName:"API-Reference/search",slug:"/API-Reference/search/FindInFiles",permalink:"/api/API-Reference/search/FindInFiles",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"FindBar",permalink:"/api/API-Reference/search/FindBar"},next:{title:"FindReplace",permalink:"/api/API-Reference/search/FindReplace"}},c={},h=[{value:"Import :",id:"import-",level:3},{value:"searchModel : <code>SearchModel</code>",id:"searchmodel--searchmodel",level:2},{value:"_cachedFileSystemEvents",id:"_cachedfilesystemevents",level:2},{value:"_processCachedFileSystemEvents",id:"_processcachedfilesystemevents",level:2},{value:"@type : <code>Object</code>",id:"type--object",level:2},{value:"MAX_DISPLAY_LENGTH",id:"max_display_length",level:2},{value:"FILE_SYSTEM_EVENT_DEBOUNCE_TIME",id:"file_system_event_debounce_time",level:2},{value:"_removeListeners()",id:"_removelisteners",level:2},{value:"_addListeners()",id:"_addlisteners",level:2},{value:"_subtreeFilter(file, scope) \u21d2 <code>boolean</code>",id:"_subtreefilterfile-scope--boolean",level:2},{value:"_isReadableFileType(fullPath) \u21d2 <code>boolean</code>",id:"_isreadablefiletypefullpath--boolean",level:2},{value:"getCandidateFiles(scope) \u21d2 <code>$.Promise</code>",id:"getcandidatefilesscope--promise",level:2},{value:"_inSearchScope(file) \u21d2 <code>boolean</code>",id:"_insearchscopefile--boolean",level:2},{value:"doSearchInScope(queryInfo, scope, filter, replaceText, candidateFilesPromise) \u21d2 <code>$.Promise</code>",id:"dosearchinscopequeryinfo-scope-filter-replacetext-candidatefilespromise--promise",level:2},{value:"doReplace(results, replaceText, options, item, error) \u21d2 <code>$.Promise</code>",id:"doreplaceresults-replacetext-options-item-error--promise",level:2},{value:"_searchcollapseResults()",id:"_searchcollapseresults",level:2},{value:"filesChanged(fileList)",id:"fileschangedfilelist",level:2},{value:"filesRemoved(fileList)",id:"filesremovedfilelist",level:2},{value:"_debouncedFileSystemChangeHandler()",id:"_debouncedfilesystemchangehandler",level:2},{value:"_initCache()",id:"_initcache",level:2},{value:"getNextPageofSearchResults() \u21d2 <code>object</code>",id:"getnextpageofsearchresults--object",level:2}];function o(e){const s={br:"br",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h3,{id:"import-",children:"Import :"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-js",children:'const FindInFiles = brackets.getModule("search/FindInFiles")\n'})}),"\n",(0,i.jsx)("a",{name:"searchModel"}),"\n",(0,i.jsxs)(s.h2,{id:"searchmodel--searchmodel",children:["searchModel : ",(0,i.jsx)("code",{children:"SearchModel"})]}),"\n",(0,i.jsx)(s.p,{children:"The search query and results model."}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Kind"}),": global variable"]}),"\n",(0,i.jsx)("a",{name:"_cachedFileSystemEvents"}),"\n",(0,i.jsx)(s.h2,{id:"_cachedfilesystemevents",children:"_cachedFileSystemEvents"}),"\n",(0,i.jsx)(s.p,{children:"This stores file system events emitted by watchers that were not yet processed"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Kind"}),": global variable"]}),"\n",(0,i.jsx)("a",{name:"_processCachedFileSystemEvents"}),"\n",(0,i.jsx)(s.h2,{id:"_processcachedfilesystemevents",children:"_processCachedFileSystemEvents"}),"\n",(0,i.jsx)(s.p,{children:"Debounced function to process emitted file system events\rfor cases when there's a lot of fs events emitted in a very short period of time"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Kind"}),": global variable"]}),"\n",(0,i.jsx)("a",{name:"@type"}),"\n",(0,i.jsxs)(s.h2,{id:"type--object",children:["@type : ",(0,i.jsx)("code",{children:"Object"})]}),"\n",(0,i.jsx)(s.p,{children:"Token used to indicate a specific reason for zero search results"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Kind"}),": global constant"]}),"\n",(0,i.jsx)("a",{name:"MAX_DISPLAY_LENGTH"}),"\n",(0,i.jsx)(s.h2,{id:"max_display_length",children:"MAX_DISPLAY_LENGTH"}),"\n",(0,i.jsx)(s.p,{children:"Maximum length of text displayed in search results panel"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Kind"}),": global constant"]}),"\n",(0,i.jsx)("a",{name:"FILE_SYSTEM_EVENT_DEBOUNCE_TIME"}),"\n",(0,i.jsx)(s.h2,{id:"file_system_event_debounce_time",children:"FILE_SYSTEM_EVENT_DEBOUNCE_TIME"}),"\n",(0,i.jsx)(s.p,{children:"Waits for FS changes to stack up until processing them\r(scripts like npm install can do a lot of movements on the disk)"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Kind"}),": global constant"]}),"\n",(0,i.jsx)("a",{name:"_removeListeners"}),"\n",(0,i.jsx)(s.h2,{id:"_removelisteners",children:"_removeListeners()"}),"\n",(0,i.jsx)(s.p,{children:"Remove the listeners that were tracking potential search result changes"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Kind"}),": global function"]}),"\n",(0,i.jsx)("a",{name:"_addListeners"}),"\n",(0,i.jsx)(s.h2,{id:"_addlisteners",children:"_addListeners()"}),"\n",(0,i.jsx)(s.p,{children:"Add listeners to track events that might change the search result set"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Kind"}),": global function"]}),"\n",(0,i.jsx)("a",{name:"_subtreeFilter"}),"\n",(0,i.jsxs)(s.h2,{id:"_subtreefilterfile-scope--boolean",children:["_subtreeFilter(file, scope) \u21d2 ",(0,i.jsx)("code",{children:"boolean"})]}),"\n",(0,i.jsx)(s.p,{children:"Checks that the file matches the given subtree scope. To fully check whether the file\rshould be in the search set, use _inSearchScope() instead - a supserset of this."}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Kind"}),": global function"]}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Param"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"file"}),(0,i.jsx)(s.td,{children:(0,i.jsx)("code",{children:"File"})}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"scope"}),(0,i.jsx)(s.td,{children:(0,i.jsx)("code",{children:"FileSystemEntry"})}),(0,i.jsx)(s.td,{children:"Search scope, or null if whole project"})]})]})]}),"\n",(0,i.jsx)("a",{name:"_isReadableFileType"}),"\n",(0,i.jsxs)(s.h2,{id:"_isreadablefiletypefullpath--boolean",children:["_isReadableFileType(fullPath) \u21d2 ",(0,i.jsx)("code",{children:"boolean"})]}),"\n",(0,i.jsx)(s.p,{children:"Filters out files that are known binary types."}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Kind"}),": global function",(0,i.jsx)(s.br,{}),"\n",(0,i.jsx)(s.strong,{children:"Returns"}),": ",(0,i.jsx)("code",{children:"boolean"})," - True if the file's contents can be read as text"]}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Param"}),(0,i.jsx)(s.th,{children:"Type"})]})}),(0,i.jsx)(s.tbody,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"fullPath"}),(0,i.jsx)(s.td,{children:(0,i.jsx)("code",{children:"string"})})]})})]}),"\n",(0,i.jsx)("a",{name:"getCandidateFiles"}),"\n",(0,i.jsxs)(s.h2,{id:"getcandidatefilesscope--promise",children:["getCandidateFiles(scope) \u21d2 ",(0,i.jsx)("code",{children:"$.Promise"})]}),"\n",(0,i.jsx)(s.p,{children:"Finds all candidate files to search in the given scope's subtree that are not binary content. Does NOT apply\rthe current filter yet."}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Kind"}),": global function",(0,i.jsx)(s.br,{}),"\n",(0,i.jsx)(s.strong,{children:"Returns"}),": ",(0,i.jsx)("code",{children:"$.Promise"})," - A promise that will be resolved with the list of files in the scope. Never rejected."]}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Param"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsx)(s.tbody,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"scope"}),(0,i.jsx)(s.td,{children:(0,i.jsx)("code",{children:"FileSystemEntry"})}),(0,i.jsx)(s.td,{children:"Search scope, or null if whole project"})]})})]}),"\n",(0,i.jsx)("a",{name:"_inSearchScope"}),"\n",(0,i.jsxs)(s.h2,{id:"_insearchscopefile--boolean",children:["_inSearchScope(file) \u21d2 ",(0,i.jsx)("code",{children:"boolean"})]}),"\n",(0,i.jsx)(s.p,{children:"Checks that the file is eligible for inclusion in the search (matches the user's subtree scope and\rfile exclusion filters, and isn't binary). Used when updating results incrementally - during the\rinitial search, these checks are done in bulk via getCandidateFiles() and the filterFileList() call\rafter it."}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Kind"}),": global function"]}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Param"}),(0,i.jsx)(s.th,{children:"Type"})]})}),(0,i.jsx)(s.tbody,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"file"}),(0,i.jsx)(s.td,{children:(0,i.jsx)("code",{children:"File"})})]})})]}),"\n",(0,i.jsx)("a",{name:"doSearchInScope"}),"\n",(0,i.jsxs)(s.h2,{id:"dosearchinscopequeryinfo-scope-filter-replacetext-candidatefilespromise--promise",children:["doSearchInScope(queryInfo, scope, filter, replaceText, candidateFilesPromise) \u21d2 ",(0,i.jsx)("code",{children:"$.Promise"})]}),"\n",(0,i.jsx)(s.p,{children:"Does a search in the given scope with the given filter. Used when you want to start a search\rprogrammatically. Make sure that project indexing is complete by calling isProjectIndexingComplete()\rElse, an empty result will be returned if search is invoked before any files are indexed."}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Kind"}),": global function",(0,i.jsx)(s.br,{}),"\n",(0,i.jsx)(s.strong,{children:"Returns"}),": ",(0,i.jsx)("code",{children:"$.Promise"})," - A promise that's resolved with the search results or rejected when the find competes."]}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Param"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"queryInfo"}),(0,i.jsx)(s.td,{children:(0,i.jsx)("code",{children:"Object"})}),(0,i.jsx)(s.td,{children:"Query info object"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"scope"}),(0,i.jsx)(s.td,{children:(0,i.jsx)("code",{children:"Entry"})}),(0,i.jsx)(s.td,{children:"Project file/subfolder to search within; else searches whole project."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"filter"}),(0,i.jsx)(s.td,{children:(0,i.jsx)("code",{children:"string"})}),(0,i.jsx)(s.td,{children:'A "compiled" filter as returned by FileFilters.compile(), or null for no filter'})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"replaceText"}),(0,i.jsx)(s.td,{children:(0,i.jsx)("code",{children:"string"})}),(0,i.jsx)(s.td,{children:"If this is a replacement, the text to replace matches with. This is just      stored in the model for later use - the replacement is not actually performed right now."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"candidateFilesPromise"}),(0,i.jsx)(s.td,{children:(0,i.jsx)("code",{children:"$.Promise"})}),(0,i.jsx)(s.td,{children:"If specified, a promise that should resolve with the same set of files that      getCandidateFiles(scope) would return."})]})]})]}),"\n",(0,i.jsx)("a",{name:"doReplace"}),"\n",(0,i.jsxs)(s.h2,{id:"doreplaceresults-replacetext-options-item-error--promise",children:["doReplace(results, replaceText, options, item, error) \u21d2 ",(0,i.jsx)("code",{children:"$.Promise"})]}),"\n",(0,i.jsxs)(s.p,{children:["Replaces a set of search results with the specified ",(0,i.jsx)(s.code,{children:"replaceText"}),", either on disk or in memory."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Kind"}),": global function",(0,i.jsx)(s.br,{}),"\n",(0,i.jsx)(s.strong,{children:"Returns"}),": ",(0,i.jsx)("code",{children:"$.Promise"})," - A promise that resolves when the replacement is finished or is rejected with an array of errors if any occur.\rEach item in the array will be an object containing:"]}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Param"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"results"}),(0,i.jsx)(s.td,{children:(0,i.jsx)("code",{children:"Object"})}),(0,i.jsxs)(s.td,{children:["- The list of results to replace, as returned from ",(0,i.jsx)(s.code,{children:"_doSearch"}),"."]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"replaceText"}),(0,i.jsx)(s.td,{children:(0,i.jsx)("code",{children:"string"})}),(0,i.jsx)(s.td,{children:"The text to replace each result with."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"options"}),(0,i.jsx)(s.td,{children:(0,i.jsx)("code",{children:"Object"})}),(0,i.jsx)(s.td,{children:"An options object:"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"options.forceFilesOpen"}),(0,i.jsx)(s.td,{children:(0,i.jsx)("code",{children:"boolean"})}),(0,i.jsx)(s.td,{children:"Whether to open all files in editors and perform replacements there instead of on disk.          Note that even if this is false, replacements will still occur in memory for files already open in editors."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"options.isRegexp"}),(0,i.jsx)(s.td,{children:(0,i.jsx)("code",{children:"boolean"})}),(0,i.jsxs)(s.td,{children:["Indicates if the original query was a regular expression. If true, $-substitution is applied to the ",(0,i.jsx)(s.code,{children:"replaceText"}),"."]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"item"}),(0,i.jsx)(s.td,{children:(0,i.jsx)("code",{children:"string"})}),(0,i.jsx)(s.td,{children:"The full path to the file that could not be updated."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"error"}),(0,i.jsx)(s.td,{children:(0,i.jsx)("code",{children:"string"})}),(0,i.jsxs)(s.td,{children:["Either a FileSystem error or one of the ",(0,i.jsx)(s.code,{children:"FindInFiles.ERROR_*"})," constants."]})]})]})]}),"\n",(0,i.jsx)("a",{name:"_searchcollapseResults"}),"\n",(0,i.jsx)(s.h2,{id:"_searchcollapseresults",children:"_searchcollapseResults()"}),"\n",(0,i.jsx)(s.p,{children:"Notify worker that the results should be collapsed"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Kind"}),": global function"]}),"\n",(0,i.jsx)("a",{name:"filesChanged"}),"\n",(0,i.jsx)(s.h2,{id:"fileschangedfilelist",children:"filesChanged(fileList)"}),"\n",(0,i.jsx)(s.p,{children:"Inform worker that the list of files has changed."}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Kind"}),": global function"]}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Param"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsx)(s.tbody,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"fileList"}),(0,i.jsx)(s.td,{children:(0,i.jsx)("code",{children:"array"})}),(0,i.jsx)(s.td,{children:"The list of files that changed."})]})})]}),"\n",(0,i.jsx)("a",{name:"filesRemoved"}),"\n",(0,i.jsx)(s.h2,{id:"filesremovedfilelist",children:"filesRemoved(fileList)"}),"\n",(0,i.jsx)(s.p,{children:"Inform worker that the list of files have been removed."}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Kind"}),": global function"]}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Param"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsx)(s.tbody,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"fileList"}),(0,i.jsx)(s.td,{children:(0,i.jsx)("code",{children:"array"})}),(0,i.jsx)(s.td,{children:"The list of files that was removed."})]})})]}),"\n",(0,i.jsx)("a",{name:"_debouncedFileSystemChangeHandler"}),"\n",(0,i.jsx)(s.h2,{id:"_debouncedfilesystemchangehandler",children:"_debouncedFileSystemChangeHandler()"}),"\n",(0,i.jsx)(s.p,{children:"Wrapper function for _fileSystemChangeHandler which handles all incoming fs events\rputting them to cache and executing a debounced function"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Kind"}),": global function"]}),"\n",(0,i.jsx)("a",{name:"_initCache"}),"\n",(0,i.jsx)(s.h2,{id:"_initcache",children:"_initCache()"}),"\n",(0,i.jsx)(s.p,{children:"On project change, inform worker about the new list of files that needs to be crawled.\rInstant search is also disabled for the time being till the crawl is complete in worker."}),"\n",(0,i.jsx)(s.p,{children:"This should never be called directly and only called via _scheduleCacheInit() below\rto not affect project load performance."}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Kind"}),": global function"]}),"\n",(0,i.jsx)("a",{name:"getNextPageofSearchResults"}),"\n",(0,i.jsxs)(s.h2,{id:"getnextpageofsearchresults--object",children:["getNextPageofSearchResults() \u21d2 ",(0,i.jsx)("code",{children:"object"})]}),"\n",(0,i.jsx)(s.p,{children:"Gets the next page of search results to append to the result set."}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Kind"}),": global function",(0,i.jsx)(s.br,{}),"\n",(0,i.jsx)(s.strong,{children:"Returns"}),": ",(0,i.jsx)("code",{children:"object"})," - A promise that's resolved with the search results or rejected when the find competes."]})]})}function a(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>d});var i=n(96540);const r={},t=i.createContext(r);function l(e){const s=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);