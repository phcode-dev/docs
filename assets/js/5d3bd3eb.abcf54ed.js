"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3741],{15505:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>t,toc:()=>c});var s=r(74848),o=r(28453);const d={},l=void 0,t={id:"API-Reference/project/FileSyncManager",title:"FileSyncManager",description:"Import :",source:"@site/api/API-Reference/project/FileSyncManager.md",sourceDirName:"API-Reference/project",slug:"/API-Reference/project/FileSyncManager",permalink:"/api/API-Reference/project/FileSyncManager",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"StateManager",permalink:"/api/API-Reference/preferences/StateManager"},next:{title:"FileTreeView",permalink:"/api/API-Reference/project/FileTreeView"}},i={},c=[{value:"Import :",id:"import-",level:3},{value:"_alreadyChecking : <code>boolean</code>",id:"_alreadychecking--boolean",level:2},{value:"_restartPending : <code>boolean</code>",id:"_restartpending--boolean",level:2},{value:"toReload : <code>Array.&lt;Document&gt;</code>",id:"toreload--arraydocument",level:2},{value:"toClose : <code>Array.&lt;Document&gt;</code>",id:"toclose--arraydocument",level:2},{value:"editConflicts : <code>Object</code>",id:"editconflicts--object",level:2},{value:"deleteConflicts : <code>Object</code>",id:"deleteconflicts--object",level:2},{value:"findExternalChanges(docs) \u21d2 <code>$.Promise</code>",id:"findexternalchangesdocs--promise",level:2},{value:"syncUnopenWorkingSet()",id:"syncunopenworkingset",level:2},{value:"reloadDoc(doc) \u21d2 <code>$.Promise</code>",id:"reloaddocdoc--promise",level:2},{value:"reloadChangedDocs() \u21d2 <code>$.Promise</code>",id:"reloadchangeddocs--promise",level:2},{value:"showReloadError(error, doc) \u21d2 <code>Dialog</code>",id:"showreloaderrorerror-doc--dialog",level:2},{value:"closeDeletedDocs()",id:"closedeleteddocs",level:2},{value:"presentConflicts(title) \u21d2 <code>$.Promise</code>",id:"presentconflictstitle--promise",level:2},{value:"syncOpenDocuments(title)",id:"syncopendocumentstitle",level:2}];function a(e){const n={br:"br",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h3,{id:"import-",children:"Import :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'const FileSyncManager = brackets.getModule("project/FileSyncManager")\n'})}),"\n",(0,s.jsx)("a",{name:"_alreadyChecking"}),"\n",(0,s.jsxs)(n.h2,{id:"_alreadychecking--boolean",children:["_alreadyChecking : ",(0,s.jsx)("code",{children:"boolean"})]}),"\n",(0,s.jsx)(n.p,{children:"Guard to spot re-entrancy while syncOpenDocuments() is still in progress"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Kind"}),": global variable"]}),"\n",(0,s.jsx)("a",{name:"_restartPending"}),"\n",(0,s.jsxs)(n.h2,{id:"_restartpending--boolean",children:["_restartPending : ",(0,s.jsx)("code",{children:"boolean"})]}),"\n",(0,s.jsx)(n.p,{children:"If true, we should bail from the syncOpenDocuments() process and then re-run it. See\rcomments in syncOpenDocuments() for how this works."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Kind"}),": global variable"]}),"\n",(0,s.jsx)("a",{name:"toReload"}),"\n",(0,s.jsxs)(n.h2,{id:"toreload--arraydocument",children:["toReload : ",(0,s.jsx)("code",{children:"Array.<Document>"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Kind"}),": global variable"]}),"\n",(0,s.jsx)("a",{name:"toClose"}),"\n",(0,s.jsxs)(n.h2,{id:"toclose--arraydocument",children:["toClose : ",(0,s.jsx)("code",{children:"Array.<Document>"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Kind"}),": global variable"]}),"\n",(0,s.jsx)("a",{name:"editConflicts"}),"\n",(0,s.jsxs)(n.h2,{id:"editconflicts--object",children:["editConflicts : ",(0,s.jsx)("code",{children:"Object"})]}),"\n",(0,s.jsx)(n.p,{children:"Array"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Kind"}),": global variable"]}),"\n",(0,s.jsx)("a",{name:"deleteConflicts"}),"\n",(0,s.jsxs)(n.h2,{id:"deleteconflicts--object",children:["deleteConflicts : ",(0,s.jsx)("code",{children:"Object"})]}),"\n",(0,s.jsx)(n.p,{children:"Array"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Kind"}),": global variable"]}),"\n",(0,s.jsx)("a",{name:"findExternalChanges"}),"\n",(0,s.jsxs)(n.h2,{id:"findexternalchangesdocs--promise",children:["findExternalChanges(docs) \u21d2 ",(0,s.jsx)("code",{children:"$.Promise"})]}),"\n",(0,s.jsx)(n.p,{children:"Scans all the given Documents for changes on disk, and sorts them into four buckets,\rpopulating the corresponding arrays:\rtoReload        - changed on disk; unchanged within Brackets\rtoClose         - deleted on disk; unchanged within Brackets\reditConflicts   - changed on disk; also dirty in Brackets\rdeleteConflicts - deleted on disk; also dirty in Brackets"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Kind"}),": global function",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.strong,{children:"Returns"}),": ",(0,s.jsx)("code",{children:"$.Promise"})," - Resolved when all scanning done, or rejected immediately if there's any\rerror while reading file timestamps. Errors are logged but no UI is shown."]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Param"}),(0,s.jsx)(n.th,{children:"Type"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"docs"}),(0,s.jsx)(n.td,{children:(0,s.jsx)("code",{children:"Array.<Document>"})})]})})]}),"\n",(0,s.jsx)("a",{name:"syncUnopenWorkingSet"}),"\n",(0,s.jsx)(n.h2,{id:"syncunopenworkingset",children:"syncUnopenWorkingSet()"}),"\n",(0,s.jsx)(n.p,{children:"Scans all the files in the working set that do not have Documents (and thus were not scanned\rby findExternalChanges()). If any were deleted on disk, removes them from the working set."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Kind"}),": global function"]}),"\n",(0,s.jsx)("a",{name:"reloadDoc"}),"\n",(0,s.jsxs)(n.h2,{id:"reloaddocdoc--promise",children:["reloadDoc(doc) \u21d2 ",(0,s.jsx)("code",{children:"$.Promise"})]}),"\n",(0,s.jsx)(n.p,{children:"Reloads the Document's contents from disk, discarding any unsaved changes in the editor."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Kind"}),": global function",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.strong,{children:"Returns"}),": ",(0,s.jsx)("code",{children:"$.Promise"})," - Resolved after editor has been refreshed; rejected if unable to load the\rfile's new content. Errors are logged but no UI is shown."]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Param"}),(0,s.jsx)(n.th,{children:"Type"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"doc"}),(0,s.jsx)(n.td,{children:(0,s.jsx)("code",{children:"Document"})})]})})]}),"\n",(0,s.jsx)("a",{name:"reloadChangedDocs"}),"\n",(0,s.jsxs)(n.h2,{id:"reloadchangeddocs--promise",children:["reloadChangedDocs() \u21d2 ",(0,s.jsx)("code",{children:"$.Promise"})]}),"\n",(0,s.jsx)(n.p,{children:'Reloads all the documents in "toReload" silently (no prompts). The operations are all run\rin parallel.'}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Kind"}),": global function",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.strong,{children:"Returns"}),": ",(0,s.jsx)("code",{children:"$.Promise"})," - Resolved/rejected after all reloads done; will be rejected if any one\rfile's reload failed. Errors are logged (by reloadDoc()) but no UI is shown."]}),"\n",(0,s.jsx)("a",{name:"showReloadError"}),"\n",(0,s.jsxs)(n.h2,{id:"showreloaderrorerror-doc--dialog",children:["showReloadError(error, doc) \u21d2 ",(0,s.jsx)("code",{children:"Dialog"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Kind"}),": global function"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Param"}),(0,s.jsx)(n.th,{children:"Type"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"error"}),(0,s.jsx)(n.td,{children:(0,s.jsx)("code",{children:"FileError"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"doc"}),(0,s.jsx)(n.td,{children:(0,s.jsx)("code",{children:"Document"})})]})]})]}),"\n",(0,s.jsx)("a",{name:"closeDeletedDocs"}),"\n",(0,s.jsx)(n.h2,{id:"closedeleteddocs",children:"closeDeletedDocs()"}),"\n",(0,s.jsx)(n.p,{children:'Closes all the documents in "toClose" silently (no prompts). Completes synchronously.'}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Kind"}),": global function"]}),"\n",(0,s.jsx)("a",{name:"presentConflicts"}),"\n",(0,s.jsxs)(n.h2,{id:"presentconflictstitle--promise",children:["presentConflicts(title) \u21d2 ",(0,s.jsx)("code",{children:"$.Promise"})]}),"\n",(0,s.jsx)(n.p,{children:'Walks through all the documents in "editConflicts" & "deleteConflicts" and prompts the user\rabout each one. Processing is sequential: if the user chooses to reload a document, the next\rprompt is not shown until after the reload has completed.'}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Kind"}),": global function",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.strong,{children:"Returns"}),": ",(0,s.jsx)("code",{children:"$.Promise"})," - Resolved/rejected after all documents have been prompted and (if\rapplicable) reloaded (and any resulting error UI has been dismissed). Rejected if any\rone reload failed."]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Param"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"title"}),(0,s.jsx)(n.td,{children:(0,s.jsx)("code",{children:"string"})}),(0,s.jsx)(n.td,{children:"Title of the dialog."})]})})]}),"\n",(0,s.jsx)("a",{name:"syncOpenDocuments"}),"\n",(0,s.jsx)(n.h2,{id:"syncopendocumentstitle",children:"syncOpenDocuments(title)"}),"\n",(0,s.jsx)(n.p,{children:"Check to see whether any open files have been modified by an external app since the last time\rBrackets synced up with the copy on disk (either by loading or saving the file). For clean\rfiles, we silently upate the editor automatically. For files with unsaved changes, we prompt\rthe user."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Kind"}),": global function"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Param"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"title"}),(0,s.jsx)(n.td,{children:(0,s.jsx)("code",{children:"string"})}),(0,s.jsx)(n.td,{children:'Title to use for document. Default is "External Changes".'})]})})]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>t});var s=r(96540);const o={},d=s.createContext(o);function l(e){const n=s.useContext(d);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),s.createElement(d.Provider,{value:n},e.children)}}}]);